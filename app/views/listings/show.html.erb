<div class="container mt-5">
  <%= render partial: "listings/listing_main", locals: {show_rent_btn: true, show_requests_btn: true} %>
  <hr>
  <div class="row justify-content-center">
    <div class="col-md-4 col-sm-12">
      <%= render partial: "listings/listing_terms_of_rental" %>
    </div>
    <div class="col-md-8 col-sm-12">
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0 text-uppercase">Comments from Renters
            <% unless @is_mine %>
            <%=  link_to "Add review", new_listing_review_path(@listing.id), class: "btn-small float-right"  %>
            <% end %>
          </h6>
        </div>
        <% if @listing.listing_reviews.empty? %>
          <div class="text-center">
            <div class="card-body">
              There are no reviews for this listing â€“ be the first one!
            </div>
          </div>
        <% else %>
          <div class="card-body">
            <div class="card-columns">
              <% @listing.listing_reviews.each do |review| %>
                <div class="card">
                  <div class="card-body px-3 py-2">
                    <div class="card-text text-center">
                      <p class="d-inline-block mb-0 text-muted">
                        <% review.rating.times.each do %><i class="fa-solid fa-star"></i><% end %><% (5-review.rating).times.each do %><i class="far fa-star"></i><% end %>
                      </p>
                      <p><%= review.review %> - <%= review.reviewer.full_name %></p>
                      <% if review.reviewer == current_user %>
                        <%= link_to("Edit", edit_listing_review_path(@listing, review), class: "btn btn-warning btn-sm m-1") %>
                        <%= button_to("Delete", listing_review_path(@listing, review), class: "btn btn-danger btn-sm m-1", method: :delete) %>
                      <% end %>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>